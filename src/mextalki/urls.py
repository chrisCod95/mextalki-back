from django.urls import path, re_path

from src.mextalki.views import (
    AnnouncementDetailView,
    BuyExtraHoursView,
    ChallengeDetailView,
    ConversationClubView,
    CoursesView,
    ExchangeCreditsConvoClubView,
    ExchangeCreditsView,
    IndexView,
    LeadershipBoardView,
    LessonView,
    NoSeatsConversationClubView,
    PasswordResetConfirmView,
    PasswordResetView,
    PodcastListView,
    PodcastView,
    ScheduleLessonView,
    VideoDetailView,
    VideosListView,
    challenge_correct_answer,
    like_post,
    paypal_webhook_view,
    privacy_policy,
    process_stripe_extra_hour_payment_view,
    process_stripe_extra_seats_payment_view,
    process_stripe_subscription_view,
    process_swap_credits_view,
    redeem_points_to_common_video_score,
    redeem_points_to_video_score,
    referral_user_name_view,
    schedule_lesson_view,
    stripe_create_checkout_session_view,
    stripe_create_extra_seats_session_view,
    stripe_create_subscription_checkout_session_view,
    stripe_webhook_view,
    terms_of_use,
    zapier_webhook_view,
    ChatDetailView,
    ForumHomeView,
    BlogListView,
    BlogPostDetail,
)

urlpatterns = [
    path('', IndexView.as_view(), name='index'),
    path('course/<slug:slug>', CoursesView.as_view(), name='course_detail'),
    path(
        'course/<slug:course>/<slug:lesson>',
        LessonView.as_view(),
        name='lesson_detail',
    ),
    path(
        'swap/extra_hours/success/<str:user_uid_b64>/<str:event_type>/',
        process_swap_credits_view,
        name='process_swap_extra_hours_payment',
    ),
    path('password_reset/', PasswordResetView.as_view(), name='password_reset'),
    path(
        'reset/<uidb64>/<token>/',
        PasswordResetConfirmView.as_view(),
        name='password_reset_confirm',
    ),
    path(
        'stripe/success/subscription/<str:user_uid_b64>/<str:subscription_uid_b64>/',
        process_stripe_subscription_view,
        name='process_stripe_subscription_payment',
    ),
    path(
        'stripe/success/buy_extra_hours/<str:user_uid_b64>/<str:hours>/<str:event_type>/',
        process_stripe_extra_hour_payment_view,
        name='process_stripe_extra_hours_payment',
    ),
    path(
        'stripe/success/buy_extra_seats/<str:user_uid_b64>/<str:seats>/',
        process_stripe_extra_seats_payment_view,
        name='process_stripe_extra_seats_payment',
    ),
    path(
        'webhook/paypal/',
        paypal_webhook_view,
        name='paypal_webhook',
    ),
    path(
        'webhook/stripe/',
        stripe_webhook_view,
        name='stripe_webhook',
    ),
    path(
        'webhook/zapier/',
        zapier_webhook_view,
        name='zapier_webhook',
    ),
    path(
        'lessons/',
        ScheduleLessonView.as_view(),
        name='lessons',
    ),
    path(
        'conversation-club/',
        ConversationClubView.as_view(),
        name='conversation_club',
    ),
    path(
        'conversation-club/no-seats/',
        NoSeatsConversationClubView.as_view(),
        name='no_seats_conversation_club',
    ),
    re_path(
        r'^buy-extra-hours/(?P<event_type>[a-z]+)/$',
        BuyExtraHoursView.as_view(),
        name='buy_extra_hours',
    ),
    path(
        'exchange-credits/conversation-club/',
        ExchangeCreditsConvoClubView.as_view(),
        name='exchange_credits_convo_club',
    ),
    re_path(
        r'^exchange-credits/(?P<event_type>[a-z]+)/$',
        ExchangeCreditsView.as_view(),
        name='exchange_credits',
    ),
    path(
        'stripe/create_subscription_checkout_session/',
        stripe_create_subscription_checkout_session_view,
        name='stripe_create_subscription_checkout_session',
    ),
    path(
        'stripe/create_checkout_session/',
        stripe_create_checkout_session_view,
        name='stripe_create_checkout_session',
    ),
    path(
        'stripe/create_extra_seats_checkout_session/',
        stripe_create_extra_seats_session_view,
        name='stripe_create_extra_seats_checkout_session_view',
    ),
    path(
        'schedule_lesson/create/<str:user_uid_b64>/<str:event_type_uid_b64>/',
        schedule_lesson_view,
        name='schedule_lesson',
    ),
    path(
        'podcast/',
        PodcastListView.as_view(),
        name='podcast',
    ),
    path(
        'podcast/<slug:slug>',
        PodcastView.as_view(),
        name='podcast_detail',
    ),
    path('privacy-policy/', privacy_policy, name='privacy_policy'),
    path('terms-of-use/', terms_of_use, name='terms_of_use'),
    path(
        'podcast/redeem-video-score/<str:user_uid_b64>/<str:podcast_id>/',
        redeem_points_to_video_score,
        name='redeem_points_to_video_score',
    ),
    path(
        'videos/',
        VideosListView.as_view(),
        name='videos_list',
    ),
    path(
        'videos/<slug:slug>',
        VideoDetailView.as_view(),
        name='video_detail',
    ),
    path(
        'videos/redeem-video-score/<str:user_uid_b64>/<str:video_id>/',
        redeem_points_to_common_video_score,
        name='redeem_points_to_common_video_score',
    ),
    path(
        'leadership-board/',
        LeadershipBoardView.as_view(),
        name='leadership_board',
    ),
    path(
        'forum/home/',
        ForumHomeView.as_view(),
        name='default_forum_home',
        kwargs={'main_context': 'chat'},
    ),
    path(
      'forum/home/<str:main_context>/',
      ForumHomeView.as_view(),
      name='context_forum_home',
    ),
    path(
        'announcement/<slug:slug>',
        AnnouncementDetailView.as_view(),
        name='announcement_detail',
    ),
    path(
        'post/like/<str:user_uid_b64>/<str:post_id>/',
        like_post,
        name='like_post_request',
    ),
    path(
        'challenges/<slug:slug>/',
        ChallengeDetailView.as_view(),
        name='challenge_detail',
    ),
    path(
        'challenges/correct-answer/<str:user_uid_b64>/<str:comment_id>/',
        challenge_correct_answer,
        name='challenge_correct_answer',
    ),
    path(
        'chat/<str:user_uid_b64>/',
        ChatDetailView.as_view(),
        name='chat_detail',
    ),
    path(
        'blog-posts/',
        BlogListView.as_view(),
        name='blog_post_list',
    ),
    path(
        'blog-posts/<slug:slug>',
        BlogPostDetail.as_view(),
        name='blog_post_detail',
    ),
    path(
        '<slug:username>/',
        referral_user_name_view,
        name='referral_by_user_name',
    ),
]

handler404 = 'src.mextalki.views.handler404'
